<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Carts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>

<body class="bg-body-secondary">
    <div id="show"></div>
    <div id="show2"></div>
    <div class="w-75 mx-auto text-center mb-5" style="margin-top: 80px;">
        <button class=" btn bg-danger text-light  fs-6" id="deleteALLItems" onclick="deleteALL();"> üóëÔ∏è Delete All Items
        </button>
        <button class="btn btn-warning text-light w-auto mt-5 fw-bold fs-4 " id="CheckOut">

        </button>

    </div>
    <script>

        window.addEventListener("load", () => {

            myFunction();
        });





        function ProductPlus(index) {
            AllProducts[index].Quantity++;
            localStorage.setItem('ProductList', JSON.stringify(AllProducts));
            AllProducts = JSON.parse(localStorage.getItem('ProductList')) || [];

            myFunction();

        }
        function ProductNumSub(index) {
            if (AllProducts[index].Quantity === 1) {
                Psum.disabled = true;
                return;
            }else {
                Psum.disabled = false;
            
            AllProducts[index].Quantity--;
            localStorage.setItem('ProductList', JSON.stringify(AllProducts));
            AllProducts = JSON.parse(localStorage.getItem('ProductList')) || [];

            myFunction();

        }
    }

        let AllProducts = JSON.parse(localStorage.getItem('ProductList')) || [];

        function myFunction() {
            let CheckOutAmount = 0;

            show.innerHTML = '';
            if (AllProducts.length === 0) {

                show2.innerHTML = `
                <div class="w-50 mx-auto text-center" style="margin-top: 100px;">
                    <div>
                    <img src="images/Bcart.png" style="width:150px; height:auto; margin-bottom:20px;">
                </div>
                    <h3 class="fw-bold">Your cart is empty!</h3>
                <h5>browse our categories and discover our best deals!</h5>
                <button class="btn btn-warning text-light w-100 fw-bold fs-4 " onclick="location.href='dashboard.html'" style="height:60px" >Start Shopping</button>
                </div>
                `



                deleteALLItems.style.display = 'none';
                CheckOut.style.display = 'none';

            } else {
                deleteALLItems.style.display = 'block'
                CheckOut.style.display = 'block'


                for (let i = 0; i < AllProducts.length; i++) {

                    show.innerHTML += `
    <div style="width: 100%; display:flex; gap:20px; margin-bottom: 45px; margin-top: 45px; ">

                    <p>${i + 1}</p>
                    
        <div class="card mb-3 me-4" style="max-width: 540px;">
          <div class="row g-0">
                  <div class="col-md-4 h-auto">
                    <img src="${AllProducts[i].Image}" class="img-fluid rounded-start w-100 " alt="...">
                   
                   </div>

               <div class="col-md-8">
                         <div class="card-body">
              
                            <h3>${AllProducts[i].Name}</h3>
                            <p>${AllProducts[i].Description}</p>
                            <p>${AllProducts[i].Price}</p>
                            
                         </div>
               </div>

                <div class=" mb-3 d-flex gap-5 ms-4">
                    <button class="btn btn-outline-warning border-0 text-dark" onclick="RemoveItem(${i});">üöÆ Remove </button>    
                     <div style=" display:flex; gap:10px; margin-bottom: 20px;">
                            <button class=" btn bg-secondary text-light  fs-6" onclick="ProductNumSub(${i});" id="Psum"> - </button> <div class="mt-2">${AllProducts[i].Quantity}</div> <button class=" btn bg-warning text-light  fs-6" onclick="ProductPlus(${i})"> + </button>
                     </div>
                </div>
         </div>
    </div>
    

                    
    
    `
                    CheckOutAmount += AllProducts[i].Quantity * AllProducts[i].Price.replace('$', '');
                    CheckOut.innerHTML = `üõí Check Out - $${CheckOutAmount.toFixed(2)}`;


                }

                CheckOut.innerHTML = `üõí Check Out - $${CheckOutAmount.toFixed(2)}`;

            }
        }




        const RemoveItem = (index) => {
            const confirmMessage = confirm('Are you sure you want to remove this item?')
            if (confirmMessage) {
                AllProducts.splice(index, 1)
                localStorage.setItem('ProductList', JSON.stringify(AllProducts));
                AllProducts = JSON.parse(localStorage.getItem('ProductList')) || [];
                myFunction();

            }

        }
        const deleteALL = () => {
            const confirmMessage = confirm('Are you sure you want to delete All this item?')
            if (confirmMessage) {
                AllProducts = [];
                localStorage.setItem('ProductList', JSON.stringify(AllProducts));
                AllProducts = JSON.parse(localStorage.getItem('ProductList')) || [];
                myFunction();

            }

        }



    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>

</body>

</html>